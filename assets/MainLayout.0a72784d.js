import{Q as V,g as R}from"./scroll.122d98de.js";import{c as B,h as N,a as U,b as j}from"./dom.0c45f49f.js";import{i as k,e as z,r as h,c as i,w as b,o as E,h as f,l as T,g as F,p as M,a as I,b as K,d as S,f as A,_ as D,j as G,k as J,m as X,n as Y,q as W,s as P}from"./index.dc203d2a.js";import{Q as Z}from"./QScrollObserver.add0656f.js";var ee=B({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:p,emit:v}){const{proxy:{$q:o}}=F(),a=k(T,z);if(a===z)return console.error("QHeader needs to be child of QLayout"),z;const l=h(parseInt(t.heightHint,10)),s=h(!0),w=i(()=>t.reveal===!0||a.view.value.indexOf("H")>-1||o.platform.is.ios&&a.isContainer.value===!0),m=i(()=>{if(t.modelValue!==!0)return 0;if(w.value===!0)return s.value===!0?l.value:0;const e=l.value-a.scroll.value.position;return e>0?e:0}),u=i(()=>t.modelValue!==!0||w.value===!0&&s.value!==!0),_=i(()=>t.modelValue===!0&&u.value===!0&&t.reveal===!0),q=i(()=>"q-header q-layout__section--marginal "+(w.value===!0?"fixed":"absolute")+"-top"+(t.bordered===!0?" q-header--bordered":"")+(u.value===!0?" q-header--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus":"")),C=i(()=>{const e=a.rows.value.top,d={};return e[0]==="l"&&a.left.space===!0&&(d[o.lang.rtl===!0?"right":"left"]=`${a.left.size}px`),e[2]==="r"&&a.right.space===!0&&(d[o.lang.rtl===!0?"left":"right"]=`${a.right.size}px`),d});function c(e,d){a.update("header",e,d)}function g(e,d){e.value!==d&&(e.value=d)}function L({height:e}){g(l,e),c("size",e)}function H(e){_.value===!0&&g(s,!0),v("focusin",e)}b(()=>t.modelValue,e=>{c("space",e),g(s,!0),a.animate()}),b(m,e=>{c("offset",e)}),b(()=>t.reveal,e=>{e===!1&&g(s,t.modelValue)}),b(s,e=>{a.animate(),v("reveal",e)}),b(a.scroll,e=>{t.reveal===!0&&g(s,e.direction==="up"||e.position<=t.revealOffset||e.position-e.inflectionPoint<100)});const $={};return a.instances.header=$,t.modelValue===!0&&c("size",l.value),c("space",t.modelValue),c("offset",m.value),E(()=>{a.instances.header===$&&(a.instances.header=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const e=N(p.default,[]);return t.elevated===!0&&e.push(f("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(f(V,{debounce:0,onResize:L})),f("header",{class:q.value,style:C.value,onFocusin:H},e)}}}),te=B({name:"QPageContainer",setup(t,{slots:p}){const{proxy:{$q:v}}=F(),o=k(T,z);if(o===z)return console.error("QPageContainer needs to be child of QLayout"),z;M(I,!0);const a=i(()=>{const l={};return o.header.space===!0&&(l.paddingTop=`${o.header.size}px`),o.right.space===!0&&(l[`padding${v.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(l.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(l[`padding${v.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),l});return()=>f("div",{class:"q-page-container",style:a.value},U(p.default))}}),ne=B({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:p,emit:v}){const{proxy:{$q:o}}=F(),a=h(null),l=h(o.screen.height),s=h(t.container===!0?0:o.screen.width),w=h({position:0,direction:"down",inflectionPoint:0}),m=h(0),u=h(K.value===!0?0:R()),_=i(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),q=i(()=>t.container===!1?{minHeight:o.screen.height+"px"}:null),C=i(()=>u.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${u.value}px`}:null),c=i(()=>u.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${u.value}px`,width:`calc(100% + ${u.value}px)`}:null);function g(n){if(t.container===!0||document.qScrollPrevented!==!0){const r={position:n.position.top,direction:n.direction,directionChanged:n.directionChanged,inflectionPoint:n.inflectionPoint.top,delta:n.delta.top};w.value=r,t.onScroll!==void 0&&v("scroll",r)}}function L(n){const{height:r,width:y}=n;let x=!1;l.value!==r&&(x=!0,l.value=r,t.onScrollHeight!==void 0&&v("scrollHeight",r),$()),s.value!==y&&(x=!0,s.value=y),x===!0&&t.onResize!==void 0&&v("resize",n)}function H({height:n}){m.value!==n&&(m.value=n,$())}function $(){if(t.container===!0){const n=l.value>m.value?R():0;u.value!==n&&(u.value=n)}}let e=null;const d={instances:{},view:i(()=>t.view),isContainer:i(()=>t.container),rootRef:a,height:l,containerHeight:m,scrollbarWidth:u,totalWidth:i(()=>s.value+u.value),rows:i(()=>{const n=t.view.toLowerCase().split(" ");return{top:n[0].split(""),middle:n[1].split(""),bottom:n[2].split("")}}),header:S({size:0,offset:0,space:!1}),right:S({size:300,offset:0,space:!1}),footer:S({size:0,offset:0,space:!1}),left:S({size:300,offset:0,space:!1}),scroll:w,animate(){e!==null?clearTimeout(e):document.body.classList.add("q-body--layout-animate"),e=setTimeout(()=>{e=null,document.body.classList.remove("q-body--layout-animate")},155)},update(n,r,y){d[n][r]=y}};if(M(T,d),R()>0){let y=function(){n=null,r.classList.remove("hide-scrollbar")},x=function(){if(n===null){if(r.scrollHeight>o.screen.height)return;r.classList.add("hide-scrollbar")}else clearTimeout(n);n=setTimeout(y,300)},Q=function(O){n!==null&&O==="remove"&&(clearTimeout(n),y()),window[`${O}EventListener`]("resize",x)},n=null;const r=document.body;b(()=>t.container!==!0?"add":"remove",Q),t.container!==!0&&Q("add"),A(()=>{Q("remove")})}return()=>{const n=j(p.default,[f(Z,{onScroll:g}),f(V,{onResize:L})]),r=f("div",{class:_.value,style:q.value,ref:t.container===!0?void 0:a,tabindex:-1},n);return t.container===!0?f("div",{class:"q-layout-container overflow-hidden",ref:a},[f(V,{onResize:H}),f("div",{class:"absolute-full",style:C.value},[f("div",{class:"scroll",style:c.value},[r])])]):r}}});const ae=G({name:"MainLayout",setup(){return{}}});function oe(t,p,v,o,a,l){const s=J("router-view");return X(),Y(ne,{view:"hhh lpr fff"},{default:W(()=>[P(ee,{elevated:""}),P(te,null,{default:W(()=>[P(s)]),_:1})]),_:1})}var ue=D(ae,[["render",oe]]);export{ue as default};
